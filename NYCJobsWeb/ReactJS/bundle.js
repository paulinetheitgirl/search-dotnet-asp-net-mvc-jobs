window.GetMap=function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.GetMap=function(){ReactDOM.render(React.createElement(m,null),document.getElementById("root"))};var l=function(e){function t(e){r(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChangeSearchTerm=a.handleChangeSearchTerm.bind(a),a.handleChangeZipCode=a.handleChangeZipCode.bind(a),a.handleChangeMaxDistance=a.handleChangeMaxDistance.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a}return s(t,React.Component),n(t,[{key:"handleChangeSearchTerm",value:function(e){this.props.handleChangedSearch({searchTerm:e.target.value})}},{key:"handleChangeZipCode",value:function(e){this.props.handleChangedSearch({zipCode:e.target.value},!0)}},{key:"handleChangeMaxDistance",value:function(e){this.props.handleChangedSearch({maxDistanceKm:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.doSearch()}},{key:"render",value:function(){var e=this.props.searchConditions;return React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("div",{className:"widget-content clearfix"},React.createElement("div",{id:"remote"},React.createElement("input",{value:e.searchTerm,onChange:this.handleChangeSearchTerm,className:"form-control walkthrough-1",type:"text",id:"q",placeholder:"Search Jobs"}),React.createElement("select",{className:"form-control pull-left walkthrough-2",id:"cmbDistance",onChange:this.handleChangeMaxDistance,value:e.maxDistance},React.createElement("option",{value:"0"},"Any distance from"),React.createElement("option",{value:"1"},"Within 1 KM of"),React.createElement("option",{value:"5"},"Within 5 KM of"),React.createElement("option",{value:"20"},"Within 20 KM of"),React.createElement("option",{value:"50"},"Within 50 KM of")),React.createElement("input",{type:"text",id:"zipCode",className:"form-control pull-left",value:e.zipCode,placeholder:"ZIP",onChange:this.handleChangeZipCode}),React.createElement("input",{type:"submit",className:"search-submit",value:" ",onClick:this.handleSubmit}))))}}]),t}(),i=function(e){function t(e){r(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleFacetedSearch=a.handleFacetedSearch.bind(a),a}return s(t,React.Component),n(t,[{key:"handleFacetedSearch",value:function(e,t){e.preventDefault();var a={};a[this.props.facetPropName]=t,this.props.handleChangedSearch(a,!0)}},{key:"render",value:function(){var e=this,t=this.props.facetItems;return"salaryRangeFacet"!=this.props.facetPropName?React.createElement("ul",{className:"filter-list",id:this.props.facetId},t.map(function(t){return React.createElement("li",null,React.createElement("a",{href:"javascript:void(0)",onClick:function(a){e.handleFacetedSearch(a,t.value)}},t.value," (",t.count,")"))})):React.createElement("ul",{className:"filter-list",id:this.props.facetId},t.map(function(t){var a=parseInt(t.value),n=a+49999;return React.createElement("li",null,React.createElement("a",{href:"javascript:void(0)",onClick:function(a){e.handleFacetedSearch(a,t.value)}},"$",a.toLocaleString()," - $",n.toLocaleString()," (",t.count,")"))}))}}]),t}(),o=function(e){function t(e){r(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currentPage:1,businessTitleFacet:"",postingTypeFacet:"",salaryRangeFacet:"",sortType:"featured"},a}return s(t,React.Component),n(t,[{key:"render",value:function(){this.setState({infoboxLayer:new Microsoft.Maps.EntityCollection,pinLayer:new Microsoft.Maps.EntityCollection}),this.map=new Microsoft.Maps.Map(document.getElementById("jobs-page-map"),{credentials:"Ag6emoVznJlat4hHnw7nrYGDlQ43ZjXAY7e-8R4bu8ZC7K1d8ORGhZMBkVu3KAVq",center:new Microsoft.Maps.Location(40.736224,-73.992511),zoom:12})}}]),t}(),h=function(e){function t(e){r(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChangeSortBy=a.handleChangeSortBy.bind(a),a}return s(t,React.Component),n(t,[{key:"handleChangeSortBy",value:function(e){this.props.handleChangedSearch({sortType:e.target.value},!0)}},{key:"render",value:function(){var e=this.props.searchConditions;return React.createElement("select",{className:"form-control pull-left",id:"cmbSortType",onChange:this.handleChangeSortBy,value:e.sortType},React.createElement("option",{value:"featured"},"Relevance"),React.createElement("option",{value:"salaryDesc"},"Salary (High to Low)"),React.createElement("option",{value:"salaryIncr"},"Salary (Low to High)"),React.createElement("option",{value:"mostRecent"},"Most Recently Added"))}}]),t}(),u=function(e){function t(e){r(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChangePage=a.handleChangePage.bind(a),a}return s(t,React.Component),n(t,[{key:"handleChangePage",value:function(e,t){e.preventDefault(),this.props.handleChangedSearch({currentPage:t},!0)}},{key:"render",value:function(){var e,t,a,n=this,r=this.props.totalJobs,c=this.props.currentPage,s=[];if(r>0){var l=Math.round(r/10),i=c<3?1:c-2,o=Math.min(i+5,l+1),h=Math.max(c-1,1),u=Math.min(c+1,l);s.push(React.createElement("li",null,React.createElement("a",{href:"#",className:"fa fa-angle-left",onClick:function(e){n.handleChangePage(e,h)}})));for(var d=function(e){s.push(React.createElement("li",null,React.createElement("a",{href:"#",onClick:function(t){n.handleChangePage(t,e)}},e)))},p=i;p<o;p++)d(p);s.push(React.createElement("li",null,React.createElement("a",(a="fa fa-angle-right",(t="className")in(e={href:"#",className:"fa fa-angle-left",onClick:function(e){n.handleChangePage(e,u)}})?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e))))}return React.createElement("ul",{id:"pagination",className:"pagination pull-right"},s)}}]),t}(),d=function(e){function t(e){return r(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,React.Component),n(t,[{key:"render",value:function(){var e=this.props.pageOfResults;return React.createElement("div",{id:"job_details_div"},e.map(function(e){return React.createElement(p,{value:e.document})}))}}]),t}(),p=function(e){function t(e){return r(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,React.Component),n(t,[{key:"render",value:function(){var e=new Date(this.props.value.posting_date);return React.createElement("div",{className:"jobs-item with-thumb"},React.createElement("div",{className:"thumb"},React.createElement("img",{src:"/images/content/bus-01.png",alt:""})),React.createElement("div",{className:"clearfix visible-xs"}),React.createElement("div",{className:"date"},e.getDay()," ",React.createElement("span",null,["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()])),React.createElement("h6",{className:"title"},React.createElement("a",{href:"/home/jobdetails?id="+this.props.value.id},this.props.value.business_title)," ",this.props.value.tags.length?"- Featured Job":""),React.createElement("span",{className:"meta"},this.props.value.work_location),React.createElement("p",{className:"description"},React.createElement("b",null,"Salary:")," $",this.props.value.salary_range_from.toLocaleString(),this.props.value.salary_range_to>this.props.value.salary_range_from?" to $"+this.props.value.salary_range_to.toLocaleString():""," ",this.props.value.salary_frequency),React.createElement("p",{class:"description"},this.props.value.job_description.substring(0,500),"   ",React.createElement("a",{href:"/home/jobdetails?id="+this.props.value.id,class:"read-more"},"Read More")))}}]),t}(),m=function(e){function t(e){r(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={searchConditions:{searchTerm:"",maxDistanceKm:0,zipCode:10001,currentPage:1,sortType:"featured"},searchResultObject:{results:[],facets:{business_title:[],posting_type:[],salary_range_from:[]}}},a.handleChangedSearch=a.handleChangedSearch.bind(a),a.doSearch=a.doSearch.bind(a),a}return s(t,React.Component),n(t,[{key:"componentDidMount",value:function(){this.doSearch(),(new o).render()}},{key:"handleChangedSearch",value:function(e,t){var a=this,n=Object.assign({},this.state.searchConditions,e);t?this.setState({searchConditions:n},function(){return a.doSearch()}):this.setState({searchConditions:n}),console.log(this.state)}},{key:"doSearch",value:function(){var e=JSON.stringify(this.state.searchConditions),t=this;fetch("api/search",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:e}).then(function(e){return e.json()}).then(function(e){console.log(e),t.setState({searchResultObject:e})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-4 page-sidebar"},React.createElement("aside",null,React.createElement("div",{className:"sidebar-container"},React.createElement("div",{className:"widget sidebar-widget jobs-search-widget"},React.createElement("h5",{className:"widget-title",id:"title"},"Search"),React.createElement(l,{searchConditions:this.state.searchConditions,handleChangedSearch:this.handleChangedSearch,doSearch:this.doSearch})),React.createElement("div",{className:"widget sidebar-widget jobs-filter-widget"},React.createElement("h5",{className:"widget-title"},"Filter Results"),React.createElement("p",{id:"filterReset"}),React.createElement("div",{className:"widget-content"},React.createElement("h6",{id:"businessTitleFacetTitle"},"Business Title"),React.createElement(i,{facetId:"business_title_facets",facetPropName:"businessTitleFacet",handleChangedSearch:this.handleChangedSearch,facetItems:this.state.searchResultObject.facets.business_title}),React.createElement("h6",null,"Posting Type"),React.createElement(i,{facetId:"posting_type_facets",facetPropName:"postingTypeFacet",handleChangedSearch:this.handleChangedSearch,facetItems:this.state.searchResultObject.facets.posting_type}),React.createElement("h6",null,"Minimum Salary"),React.createElement("ul",{className:"filter-list",id:"salary_range_facets"}),React.createElement(i,{facetId:"salary_range_facets",facetPropName:"salaryRangeFacet",handleChangedSearch:this.handleChangedSearch,facetItems:this.state.searchResultObject.facets.salary_range_from}))))))," ",React.createElement("div",{className:"col-sm-8 page-content"},React.createElement("div",{id:"jobs-page-map",style:{position:"relative",width:"750px",height:"350px"}}),React.createElement("h3",null,React.createElement("span",{className:"jobs-count",id:"jobs-count"},this.state.searchResultObject.count)," Available Jobs"),React.createElement("div",{className:"clearfix"},React.createElement(h,{searchConditions:this.state.searchConditions,handleChangedSearch:this.handleChangedSearch}),React.createElement(u,{handleChangedSearch:this.handleChangedSearch,totalJobs:this.state.searchResultObject.count,currentPage:this.state.searchConditions.currentPage})),React.createElement(d,{pageOfResults:this.state.searchResultObject.results}),React.createElement("div",{className:"clearfix"},React.createElement(u,{handleChangedSearch:this.handleChangedSearch,totalJobs:this.state.searchResultObject.count,currentPage:this.state.searchConditions.currentPage})))," ")}}]),t}()}]).GetMap;